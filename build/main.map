{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/config/index.js","webpack:///./src/db/index.js","webpack:///./src/index.js","webpack:///./src/user/graphql/index.js","webpack:///./src/user/graphql/mutations/index.js","webpack:///./src/user/graphql/queries/index.js","webpack:///./src/user/graphql/schema/index.js","webpack:///./src/user/model/index.js","webpack:///external \"cors\"","webpack:///external \"dotenv-safe\"","webpack:///external \"express\"","webpack:///external \"express-graphql\"","webpack:///external \"graphql\"","webpack:///external \"mongoose\""],"names":["dotenv","config","HOST","PORT","DB_URL","process","env","mongoose","connect","useUnifiedTopology","useNewUrlParser","then","console","log","catch","err","error","message","app","express","connection","use","cors","graphqlHTTP","schema","userSchema","rootValue","global","graphiql","listen","GraphQLSchema","query","queryType","mutation","GraphQLObjectType","name","fields","userMutation","createUser","type","args","first_name","GraphQLNonNull","GraphQLString","last_name","email","resolve","root","params","user","UserModel","newUser","save","Error","readUser","id","findById","exec","updateUser","findByIdAndUpdate","$set","new","deleteUser","removedUser","findByIdAndRemove","users","GraphQLList","userType","find","Schema","String","required","created_at","Date","default","now","updated_at","User","model"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import dotenv from 'dotenv-safe';\n\ndotenv.config();\n\nconst {\n  HOST,\n  PORT,\n  DB_URL,\n} = process.env;\n\nexport {\n  HOST,\n  PORT,\n  DB_URL,\n}\n","import mongoose from 'mongoose';\nimport { DB_URL } from '../config'\n\nexport default () => {\n  mongoose.connect(DB_URL, {\n    useUnifiedTopology: true,\n    useNewUrlParser: true,\n  })\n    .then(() => console.log('Mongo DB connected.'))\n    .catch((err) => console.error(err.message));\n};\n","import express from 'express';\nimport graphqlHTTP from 'express-graphql';\nimport cors from 'cors';\n\nimport { HOST, PORT } from './config';\nimport connection from './db';\nimport userSchema from './user/graphql';\n\nconst app = express();\nconnection();\n\napp.use('*', cors());\n\napp.use('/', cors(), graphqlHTTP({\n  schema: userSchema,\n  rootValue: global,\n  graphiql: true\n}));\n\napp.listen(PORT, () => {\n  console.log(`🚀  Server ready at ${HOST}:${PORT}`);\n});\n","import { GraphQLSchema, GraphQLObjectType } from 'graphql';\nimport queryType from './queries';\nimport userMutation from './mutations';\n\nexport default new GraphQLSchema({\n  query: queryType,\n  mutation: new GraphQLObjectType({\n    name: 'Mutation',\n    fields: userMutation,\n  })\n});\n","import { GraphQLNonNull, GraphQLString } from 'graphql';\nimport userSchema from '../schema';\nimport UserModel from '../../model';\n\n/**\n * Mutation create User.\n * @type args:\n * {\n *    first_name: {type: GraphQLNonNull<GraphQLNullableType>},\n *    last_name: {type: GraphQLNonNull<GraphQLNullableType>},\n *    email: {type: GraphQLNonNull<GraphQLNullableType>}\n * }\n */\nconst createUser = {\n  type: userSchema,\n  args: {\n    first_name: {\n      type: new GraphQLNonNull(GraphQLString),\n    },\n    last_name: {\n      type: new GraphQLNonNull(GraphQLString),\n    },\n    email: {\n      type: new GraphQLNonNull(GraphQLString),\n    }\n  },\n  resolve(root, params) {\n    const user = new UserModel(params);\n    const newUser = user.save();\n    if (!newUser) {\n      throw new Error('Error on creating user.');\n    }\n    return newUser;\n  }\n};\n\n/**\n * Mutation reading User.\n * @type {{args: {id: {type: GraphQLNonNull<GraphQLNullableType>}} }}\n * TODO: Есть сомнения в необходимости этого метода в мутациях, т.к. пользователя можем получить в query.\n */\nconst readUser = {\n  type: userSchema,\n  args: {\n    id: {\n      type: new GraphQLNonNull(GraphQLString),\n    }\n  },\n  resolve(root, params) {\n    const user = UserModel.findById(params.id).exec();\n    if (!user) {\n      throw new Error('Error on get user by id.');\n    }\n    return user;\n  }\n};\n\n/**\n * Mutation update User.\n * @type args:\n * {\n *    id: {name: string, type: GraphQLNonNull<GraphQLNullableType>},\n *    first_name: {type: GraphQLNonNull<GraphQLNullableType>},\n *    last_name: {type: GraphQLNonNull<GraphQLNullableType>},\n *    email: {type: GraphQLNonNull<GraphQLNullableType>}\n * }\n */\nconst updateUser = {\n  type: userSchema,\n  args: {\n    id: {\n      name: 'id',\n      type: new GraphQLNonNull(GraphQLString)\n    },\n    first_name: {\n      type: new GraphQLNonNull(GraphQLString),\n    },\n    last_name: {\n      type: new GraphQLNonNull(GraphQLString),\n    },\n    email: {\n      type: new GraphQLNonNull(GraphQLString),\n    }\n  },\n  resolve(root, params) {\n    const { id, first_name, last_name, email } = params;\n    return UserModel.findByIdAndUpdate(\n      id,\n      { $set: { first_name, last_name, email } },\n      { new: true }\n    )\n      .catch(err => new Error(err));\n  }\n};\n\n/**\n * Mutation delete User.\n * @type {{args: {id: {type: GraphQLNonNull<GraphQLNullableType>}} }}\n */\nconst deleteUser = {\n  type: userSchema,\n  args: {\n    id: {\n      type: new GraphQLNonNull(GraphQLString)\n    }\n  },\n  resolve(root, params) {\n    const removedUser = UserModel.findByIdAndRemove(params.id).exec();\n    if (!removedUser) {\n      throw new Error('Error on remove user.');\n    }\n    return removedUser;\n  }\n};\n\nexport default {\n  createUser,\n  readUser,\n  updateUser,\n  deleteUser,\n};\n","import { GraphQLObjectType, GraphQLList } from 'graphql';\nimport UserModel from '../../model';\nimport userType from '../schema';\n\nexport default new GraphQLObjectType({\n  name: 'Query',\n  fields: () => {\n    return {\n      users: {\n        type: new GraphQLList(userType),\n        resolve: () => {\n          const users = UserModel.find().exec();\n          if (!users) {\n            throw new Error('Error on get user.');\n          }\n\n          return users;\n        }\n      }\n    }\n  }\n});\n\n","import { GraphQLObjectType, GraphQLString } from 'graphql';\n\nconst userSchema = new GraphQLObjectType({\n  name: 'user',\n  fields: () => {\n    return {\n      first_name: {\n        type: GraphQLString,\n      },\n      last_name: {\n        type: GraphQLString,\n      },\n      email: {\n        type: GraphQLString,\n      },\n    }\n  }\n});\n\nexport default userSchema;\n","import mongoose from 'mongoose';\n\nconst Schema = mongoose.Schema;\n\n/**\n * Mongoose user schema.\n */\nconst userSchema = new Schema({\n  first_name: {\n    type: String,\n    required: true,\n  },\n  last_name: {\n    type: String,\n    required: true,\n  },\n  email: {\n    type: String,\n    required: true,\n  },\n  created_at: {\n    type: Date,\n    default: Date.now(),\n  },\n  updated_at: {\n    type: Date,\n    default: Date.now(),\n  }\n});\n\nconst User = mongoose.model('User', userSchema);\n\nexport default User;\n","module.exports = require(\"cors\");","module.exports = require(\"dotenv-safe\");","module.exports = require(\"express\");","module.exports = require(\"express-graphql\");","module.exports = require(\"graphql\");","module.exports = require(\"mongoose\");"],"sourceRoot":""}